# GitHub Actions å·¥ä½œæµç¨‹åç¨±
name: Build and Deploy

# è§¸ç™¼æ¢ä»¶ï¼šç•¶æ¨é€åˆ° main åˆ†æ”¯æ™‚åŸ·è¡Œ
on:
  push:
    branches:
      - main

# å·¥ä½œå…§å®¹
jobs:
  build-and-deploy:
    # é‹è¡Œçš„è™›æ“¬ç’°å¢ƒ
    runs-on: ubuntu-latest

    # å·¥ä½œæ­¥é©Ÿ
    steps:
      # æ­¥é©Ÿ 1: å–å¾—ä½ çš„ç¨‹å¼ç¢¼
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3

      # æ­¥é©Ÿ 2: è¨­å®š Node.js ç’°å¢ƒï¼Œä»¥ä¾¿ä½¿ç”¨ npm
      - name: Setup Node.js âš™ï¸
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      # æ­¥é©Ÿ 3: å®‰è£å°ˆæ¡ˆä¾è³´ (Tailwind CSS)
      - name: Install dependencies ğŸ“¦
        run: npm install

      # æ­¥é©Ÿ 4: åŸ·è¡Œ build æŒ‡ä»¤ï¼Œç”¢ç”Ÿ style.css
      - name: Build CSS ğŸ¨
        run: npm run build:css

      # æ­¥é©Ÿ 5: å°‡å»ºç½®å¥½çš„ç¶²ç«™éƒ¨ç½²åˆ° gh-pages åˆ†æ”¯
      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages # è¦éƒ¨ç½²åˆ°çš„åˆ†æ”¯
          folder: . # è¦éƒ¨ç½²çš„è³‡æ–™å¤¾ (æ ¹ç›®éŒ„)
